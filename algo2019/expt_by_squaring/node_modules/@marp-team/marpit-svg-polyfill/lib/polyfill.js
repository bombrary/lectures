"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var detectBrowser=require("detect-browser");let memoizedPolyfills;const webkitBrowsers=["android","bb10","crios","facebook","fxios","instagram","ios-webview","ios","phantomjs","safari"],symbolObserver=Symbol("MarpitSVGWebkitPolyfillObserver");function observe(){if(window[symbolObserver])return;if(window[symbolObserver]=!0,0===polyfills().length)return;const e=()=>{for(const e of polyfills())e();window.requestAnimationFrame(e)};e()}function polyfills(){if(!memoizedPolyfills){memoizedPolyfills=[];const{name:e}=detectBrowser.detect()||{};webkitBrowsers.includes(e)&&memoizedPolyfills.push(webkit)}return memoizedPolyfills}function webkit(e){Array.from(document.getElementsByTagName("svg"),t=>{if(t.hasAttribute("data-marpit-svg")){const{clientHeight:r,clientWidth:s}=t;t.style.transform||(t.style.transform="translateZ(0)");const o=e||t.currentScale||1,l=t.viewBox.baseVal.width/o,i=t.viewBox.baseVal.height/o,a=Math.min(r/i,s/l);Array.from(t.querySelectorAll(":scope > foreignObject"),e=>{const t=e.x.baseVal.value,o=e.y.baseVal.value;Array.from(e.querySelectorAll(":scope > section"),e=>{e.style.transformOrigin||(e.style.transformOrigin="0 0");const n=(s-a*l)/2-t,f=(r-a*i)/2-o;e.style.transform=`translate3d(${n}px,${f}px,0) scale(${a}) translate(${t}px,${o}px)`})})}})}exports.default=observe,exports.observe=observe,exports.polyfills=polyfills,exports.webkit=webkit;
